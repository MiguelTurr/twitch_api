<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Twitch Tokens</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>

<body style="background-color: rgb(2, 6, 23)">

    <div class="flex flex-col min-h-screen">
        
        <div class="absolute top-0 z-[-2] h-screen w-full bg-dark-50 dark:bg-dark-950 bg-[radial-gradient(ellipse_80%_80%_at_50%_-30%,rgba(0,200,255,0.25),rgba(255,255,255,0))]"></div>

        <section class="min-h-screen flex flex-col relative text-white p-6 pt-10 lg:w-[740px] mx-auto" id="inicio">

            <div class="flex items-center justify-center p-4 mb-2">
                <div class="w-full">

                    <!-- DATOS INICIALES -->

                    <article class="mt-4 flex flex-col px-6 py-6 rounded-2xl bg-gradient-to-r from-gray-900 to-gray-800">

                        <h1 class="flex justify-center items-center font-bold text-lg">SETUP DATOS <span class="text-gray-500">&nbsp;(OPCIONAL)</span></h1>

                        <hr class="m-2 text-gray-700">

                        <div class="w-full mx-auto mb-4">
                            <label for="client_ID" class="block text-sm text-white mb-1 font-bold">
                                CLIENT_ID
                            </label>
                            <input
                              type="text"
                              id="client_ID"
                              name="client_ID"
                              placeholder="Escribe el cliente ID..."
                              class="w-full px-4 py-2 border border-gray-300 rounded-2xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                            />
                        </div>

                        <div class="w-full mx-auto mb-4">
                            <label for="client_SECRET" class="block text-sm text-white mb-1 font-bold">
                                CLIENT_SECRET
                            </label>
                            <input
                            type="text"
                            id="client_SECRET"
                            name="client_SECRET"
                            placeholder="Escribe el cliente SECRET..."
                            class="w-full px-4 py-2 border border-gray-300 rounded-2xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                            />
                        </div>

                        <div class="flex items-center justify-center invisible" id="datos_message">&nbsp;</div>

                        <div class="flex justify-end mt-4">
                            <button
                                type="submit"
                                class="bg-red-700 text-white px-6 py-2 rounded-xl shadow-md hover:bg-red-800 active:scale-95 transition-all duration-150 font-semibold flex gap-2 cursor-pointer justify-end mr-2"
                                onclick="eliminarCredencialesBot();"
                                >
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-trash2-icon lucide-trash-2"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></svg>
                                Eliminar
                            </button>

                            <button
                                type="submit"
                                class="bg-green-600 text-white px-6 py-2 rounded-xl shadow-md hover:bg-green-700 active:scale-95 transition-all duration-150 font-semibold flex gap-2 cursor-pointer justify-end"
                                onclick="guardarCredencialesBot();"
                                >
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-save-icon lucide-save"><path d="M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"/><path d="M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"/><path d="M7 3v4a1 1 0 0 0 1 1h7"/></svg>

                                Guardar
                            </button>
                        </div>

                    </article>

                    <!-- OBTENER CLIENT_CREDENTIALS (PARA WEBHOOK) -->

                    <form class="mt-4 flex flex-col px-6 py-6 rounded-2xl bg-gradient-to-r from-gray-900 to-gray-800" onsubmit="generateTwitchToken(event)" id="client_credentials">

                        <h1 class="flex justify-center items-center font-bold text-lg">OBTENER CLIENT_CREDENTIALS (PARA WEBHOOK)</h1>

                        <hr class="m-2 text-gray-700">

                        <div class="w-full mx-auto mb-4">
                            <label for="webhook_client_ID" class="block text-sm text-white mb-1 font-bold flex gap-2">
                                CLIENT_ID
                                <svg onclick="pegarCredencialesAqui(this)" xmlns="http://www.w3.org/2000/svg" width="20" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="cursor-pointer hover:text-blue-700 lucide lucide-clipboard-paste-icon lucide-clipboard-paste"><path d="M11 14h10"/><path d="M16 4h2a2 2 0 0 1 2 2v1.344"/><path d="m17 18 4-4-4-4"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 1.793-1.113"/><rect x="8" y="2" width="8" height="4" rx="1"/></svg>
                            </label>
                            <input
                              type="text"
                              id="webhook_client_ID"
                              name="webhook_client_ID"
                              placeholder="Escribe el cliente ID..."
                              class="w-full px-4 py-2 border border-gray-300 rounded-2xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                              required
                            />
                        </div>

                        <div class="w-full mx-auto mb-4">
                            <label for="webhook_client_SECRET" class="block text-sm text-white mb-1 font-bold flex gap-2">
                                CLIENT_SECRET
                                <svg onclick="pegarCredencialesAqui(this)" xmlns="http://www.w3.org/2000/svg" width="20" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="cursor-pointer hover:text-blue-700 lucide lucide-clipboard-paste-icon lucide-clipboard-paste"><path d="M11 14h10"/><path d="M16 4h2a2 2 0 0 1 2 2v1.344"/><path d="m17 18 4-4-4-4"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 1.793-1.113"/><rect x="8" y="2" width="8" height="4" rx="1"/></svg>
                            </label>
                            <input
                            type="text"
                            id="webhook_client_SECRET"
                            name="webhook_client_SECRET"
                            placeholder="Escribe el cliente SECRET..."
                            class="w-full px-4 py-2 border border-gray-300 rounded-2xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                            required
                            />
                        </div>

                        <div class="w-full mx-auto mb-4">
                            <label class="block text-sm text-white mb-1 font-bold flex gap-2">
                                PERMISOS
                                <svg onclick="tooglePermisosWebhook(this)" xmlns="http://www.w3.org/2000/svg" width="20" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="cursor-pointer hover:text-blue-700 lucide lucide-chevron-right-icon lucide-chevron-right"><path d="m9 18 6-6-6-6"/></svg>
                            </label>

                            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 pt-4 hidden" id="webhook_permisos">
                            </div>
                        </div>

                        <div class="flex items-center justify-center invisible" id="webhook_message">&nbsp;</div>

                        <div class="flex justify-end mt-4">
                            <button
                                type="submit"
                                id="webhook_btn"
                                class="bg-blue-600 text-white px-6 py-2 rounded-xl shadow-md hover:bg-blue-700 active:scale-95 transition-all duration-150 font-semibold flex gap-2 cursor-pointer justify-end disabled:opacity-50 disabled:cursor-not-allowed"
                                >
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-send-icon lucide-send"><path d="M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"/><path d="m21.854 2.147-10.94 10.939"/></svg>
                                Obtener
                            </button>
                        </div>

                    </form>

                    <!-- OBTENER CLIENT CODE -->

                    <form class="mt-4 flex flex-col px-6 py-6 rounded-2xl bg-gradient-to-r from-gray-900 to-gray-800" onsubmit="createCodeURL(event)" id="client_code">

                        <h1 class="flex justify-center items-center font-bold text-lg">OBTENER CLIENT_CODE</h1>

                        <hr class="m-2 text-gray-700">

                        <div class="w-full mx-auto mb-4">
                            <label for="code_client_ID" class="block text-sm text-white mb-1 font-bold flex gap-2">
                                CLIENT_ID
                                <svg onclick="pegarCredencialesAqui(this)" xmlns="http://www.w3.org/2000/svg" width="20" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="cursor-pointer hover:text-blue-700 lucide lucide-clipboard-paste-icon lucide-clipboard-paste"><path d="M11 14h10"/><path d="M16 4h2a2 2 0 0 1 2 2v1.344"/><path d="m17 18 4-4-4-4"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 1.793-1.113"/><rect x="8" y="2" width="8" height="4" rx="1"/></svg>
                            </label>
                            <input
                              type="text"
                              id="code_client_ID"
                              name="code_client_ID"
                              placeholder="Escribe el cliente ID..."
                              class="w-full px-4 py-2 border border-gray-300 rounded-2xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                              required
                            />
                        </div>

                        <div class="w-full mx-auto mb-4">
                            <label for="code_uri_redirect" class="block text-sm text-white mb-1 font-bold">
                                URI_REDIRECT
                            </label>
                            <input
                            type="text"
                            id="code_uri_redirect"
                            name="code_uri_redirect"
                            placeholder="Escribe la URI REDIRECT..."
                            class="w-full px-4 py-2 border border-gray-300 rounded-2xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                            required
                            />
                        </div>

                        <div class="w-full mx-auto mb-4">
                            <label for="code_client_SECRET" class="block text-sm text-white mb-1 font-bold flex gap-2">
                                PERMISOS
                                <svg onclick="tooglePermisosCode(this)" xmlns="http://www.w3.org/2000/svg" width="20" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="cursor-pointer hover:text-blue-700 lucide lucide-chevron-right-icon lucide-chevron-right"><path d="m9 18 6-6-6-6"/></svg>
                            </label>

                            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 pt-4 hidden" id="code_permisos">
                            </div>
                        </div>

                        <div class="flex items-center justify-center invisible" id="code_message">&nbsp;</div>

                        <div class="flex justify-end mt-4">
                            <button
                                type="submit"
                                class="bg-orange-600 text-white px-6 py-2 rounded-xl shadow-md hover:bg-orange-700 active:scale-95 transition-all duration-150 font-semibold flex gap-2 cursor-pointer justify-end"
                                >
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-badge-plus-icon lucide-badge-plus"><path d="M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"/><line x1="12" x2="12" y1="8" y2="16"/><line x1="8" x2="16" y1="12" y2="12"/></svg>
                                Generar URL
                            </button>
                        </div>

                    </form>

                    <!-- OBTENER AUTHORIZATION_CODE (PARA IRC) -->

                    <form class="mt-4 flex flex-col px-6 py-6 rounded-2xl bg-gradient-to-r from-gray-900 to-gray-800" onsubmit="generateTwitchAuthorization(event)" id="authorization_code">

                        <h1 class="flex justify-center items-center font-bold text-lg">OBTENER AUTHORIZATION_CODE (PARA IRC)</h1>

                        <hr class="m-2 text-gray-700">

                        <div class="w-full mx-auto mb-4">
                            <label for="irc_client_ID" class="block text-sm text-white mb-1 font-bold flex gap-2">
                                CLIENT_ID
                                <svg onclick="pegarCredencialesAqui(this)" xmlns="http://www.w3.org/2000/svg" width="20" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="cursor-pointer hover:text-blue-700 lucide lucide-clipboard-paste-icon lucide-clipboard-paste"><path d="M11 14h10"/><path d="M16 4h2a2 2 0 0 1 2 2v1.344"/><path d="m17 18 4-4-4-4"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 1.793-1.113"/><rect x="8" y="2" width="8" height="4" rx="1"/></svg>
                            </label>
                            <input
                              type="text"
                              id="irc_client_ID"
                              name="irc_client_ID"
                              placeholder="Escribe el cliente ID..."
                              class="w-full px-4 py-2 border border-gray-300 rounded-2xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                              required
                            />
                        </div>

                        <div class="w-full mx-auto mb-4">
                            <label for="irc_client_SECRET" class="block text-sm text-white mb-1 font-bold flex gap-2">
                                CLIENT_SECRET
                                <svg onclick="pegarCredencialesAqui(this)" xmlns="http://www.w3.org/2000/svg" width="20" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="cursor-pointer hover:text-blue-700 lucide lucide-clipboard-paste-icon lucide-clipboard-paste"><path d="M11 14h10"/><path d="M16 4h2a2 2 0 0 1 2 2v1.344"/><path d="m17 18 4-4-4-4"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 1.793-1.113"/><rect x="8" y="2" width="8" height="4" rx="1"/></svg>
                            </label>
                            <input
                            type="text"
                            id="irc_client_SECRET"
                            name="irc_client_SECRET"
                            placeholder="Escribe el cliente SECRET..."
                            class="w-full px-4 py-2 border border-gray-300 rounded-2xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                            required
                            />
                        </div>

                        <div class="w-full mx-auto mb-4">
                            <label for="irc_client_CODE" class="block text-sm text-white mb-1 font-bold">
                                CLIENT_CODE
                            </label>
                            <input
                            type="text"
                            id="irc_client_CODE"
                            name="irc_client_CODE"
                            placeholder="Escribe el cliente CODE..."
                            class="w-full px-4 py-2 border border-gray-300 rounded-2xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                            required
                            />
                        </div>

                        <div class="w-full mx-auto mb-4">
                            <label for="irc_client_redirect" class="block text-sm text-white mb-1 font-bold">
                                URI_REDIRECT
                            </label>
                            <input
                            type="text"
                            id="irc_client_redirect"
                            name="irc_client_redirect"
                            placeholder="Escribe la URI REDIRECT..."
                            class="w-full px-4 py-2 border border-gray-300 rounded-2xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                            required
                            />
                        </div>

                        <div class="flex items-center justify-center invisible" id="irc_client_message">&nbsp;</div>

                        <div class="flex justify-end mt-4">
                            <button
                                type="submit"
                                class="bg-blue-600 text-white px-6 py-2 rounded-xl shadow-md hover:bg-blue-700 active:scale-95 transition-all duration-150 font-semibold flex gap-2 cursor-pointer justify-end disabled:opacity-50 disabled:cursor-not-allowed"
                                id="irc_client_btn"
                                >
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-send-icon lucide-send"><path d="M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"/><path d="m21.854 2.147-10.94 10.939"/></svg>
                                Obtener
                            </button>
                        </div>

                    </form>

                    <!-- OBTENER USER ID -->

                    <form class="mt-4 flex flex-col px-6 py-6 rounded-2xl bg-gradient-to-r from-gray-900 to-gray-800" onsubmit="getUserID(event)" id="user_id">

                        <h1 class="flex justify-center items-center font-bold text-lg">OBTENER USER ID</h1>

                        <hr class="m-2 text-gray-700">

                        <div class="w-full mx-auto mb-4">
                            <label for="user_client_ID" class="block text-sm text-white mb-1 font-bold flex gap-2">
                                CLIENT_ID
                                <svg onclick="pegarCredencialesAqui(this)" xmlns="http://www.w3.org/2000/svg" width="20" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="cursor-pointer hover:text-blue-700 lucide lucide-clipboard-paste-icon lucide-clipboard-paste"><path d="M11 14h10"/><path d="M16 4h2a2 2 0 0 1 2 2v1.344"/><path d="m17 18 4-4-4-4"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 1.793-1.113"/><rect x="8" y="2" width="8" height="4" rx="1"/></svg>
                            </label>
                            <input
                              type="text"
                              id="user_client_ID"
                              name="user_client_ID"
                              placeholder="Escribe el cliente ID..."
                              class="w-full px-4 py-2 border border-gray-300 rounded-2xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                              required
                            />
                        </div>

                        <div class="w-full mx-auto mb-4">
                            <label for="user_twitch_token" class="block text-sm text-white mb-1 font-bold">
                                TOKEN
                            </label>
                            <input
                              type="text"
                              id="user_twitch_token"
                              name="user_twitch_token"
                              placeholder="Escribe el token..."
                              class="w-full px-4 py-2 border border-gray-300 rounded-2xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                              required
                            />
                        </div>

                        <div class="w-full mx-auto mb-4">
                            <label for="user_username" class="block text-sm text-white mb-1 font-bold">
                                USERNAME
                            </label>
                            <input
                              type="text"
                              id="user_username"
                              name="user_username"
                              placeholder="Escribe el username del streamer..."
                              class="w-full px-4 py-2 border border-gray-300 rounded-2xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                              required
                            />
                        </div>

                        <div class="flex items-center justify-center invisible" id="user_message">&nbsp;</div>

                        <div class="flex justify-end mt-4">
                            <button
                                type="submit"
                                class="bg-blue-600 text-white px-6 py-2 rounded-xl shadow-md hover:bg-blue-700 active:scale-95 transition-all duration-150 font-semibold flex gap-2 cursor-pointer justify-end disabled:opacity-50 disabled:cursor-not-allowed"
                                id="user_btn"
                                >
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-send-icon lucide-send"><path d="M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"/><path d="m21.854 2.147-10.94 10.939"/></svg>
                                Obtener
                            </button>
                        </div>
                            
                    </form>
                          
                    <!-- STREAMER ESTÁ EN DIRECTO -->

                    <form class="mt-4 flex flex-col px-6 py-6 rounded-2xl bg-gradient-to-r from-gray-900 to-gray-800" onsubmit="getUserIsLive(event)" id="is_live">

                        <h1 class="flex justify-center items-center font-bold text-lg">VER USER ESTA EN DIRECTO</h1>

                        <hr class="m-2 text-gray-700">

                        <div class="w-full mx-auto mb-4">
                            <label for="live_client_ID" class="block text-sm text-white mb-1 font-bold flex gap-2">
                                CLIENT_ID
                                <svg onclick="pegarCredencialesAqui(this)" xmlns="http://www.w3.org/2000/svg" width="20" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="cursor-pointer hover:text-blue-700 lucide lucide-clipboard-paste-icon lucide-clipboard-paste"><path d="M11 14h10"/><path d="M16 4h2a2 2 0 0 1 2 2v1.344"/><path d="m17 18 4-4-4-4"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 1.793-1.113"/><rect x="8" y="2" width="8" height="4" rx="1"/></svg>
                            </label>
                            <input
                              type="text"
                              id="live_client_ID"
                              name="live_client_ID"
                              placeholder="Escribe el cliente ID..."
                              class="w-full px-4 py-2 border border-gray-300 rounded-2xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                              required
                            />
                        </div>

                        <div class="w-full mx-auto mb-4">
                            <label for="live_twitch_token" class="block text-sm text-white mb-1 font-bold">
                                TOKEN
                            </label>
                            <input
                              type="text"
                              id="live_twitch_token"
                              name="live_twitch_token"
                              placeholder="Escribe el token..."
                              class="w-full px-4 py-2 border border-gray-300 rounded-2xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                              required
                            />
                        </div>

                        <div class="w-full mx-auto mb-4">
                            <label for="live_username" class="block text-sm text-white mb-1 font-bold">
                                USERNAME
                            </label>
                            <input
                              type="text"
                              id="live_username"
                              name="live_username"
                              placeholder="Escribe el username del streamer..."
                              class="w-full px-4 py-2 border border-gray-300 rounded-2xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                              required
                            />
                        </div>

                        <div class="flex items-center justify-center invisible" id="live_message">&nbsp;</div>

                        <div class="flex justify-end mt-4">
                            <button
                                type="submit"
                                class="bg-blue-600 text-white px-6 py-2 rounded-xl shadow-md hover:bg-blue-700 active:scale-95 transition-all duration-150 font-semibold flex gap-2 cursor-pointer justify-end disabled:opacity-50 disabled:cursor-not-allowed"
                                id="live_btn"
                                >
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-send-icon lucide-send"><path d="M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"/><path d="m21.854 2.147-10.94 10.939"/></svg>
                                Obtener
                            </button>
                        </div>
                            
                    </form>

                </div>

            </div>

        </section>

    </div>

    <script>

        const URL_SERVER = 'https://localhost';
        const LOADING_ICON = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-loader-circle-icon lucide-loader-circle animate-spin"><path d="M21 12a9 9 0 1 1-6.219-8.56"/></svg>';

        // SETUP DATOS 

        var CLIENT_ID = null;
        var CLIENT_SECRET = null;

        var timeoutCredencialesBot = null;

        const ELEMENT_CLIENT_ID = document.getElementById('client_ID');
        const ELEMENT_CLIENT_SECRET = document.getElementById('client_SECRET');

        const ELEMENT_RESPUESTA = document.getElementById('datos_message');

        function guardarCredencialesBot() {

            const data1 = ELEMENT_CLIENT_ID.value;
            const data2 = ELEMENT_CLIENT_SECRET.value;

            if(!data1 && !data2) return mensajeCredencialesBot("¡Rellena ambos campos!", "text-red-600 font-bold");

            localStorage.setItem("CLIENT_ID", data1);
            CLIENT_ID = data1;

            localStorage.setItem("CLIENT_SECRET", data2);
            CLIENT_SECRET = data2;

            mensajeCredencialesBot("¡Credenciales guardadas!", "text-green-500 font-bold");
        }

        function eliminarCredencialesBot() {
            localStorage.removeItem("CLIENT_ID");
            localStorage.removeItem("CLIENT_SECRET");

            ELEMENT_CLIENT_ID.value = "";
            ELEMENT_CLIENT_SECRET.value = "";

            CLIENT_ID = null;
            CLIENT_SECRET = null;

            mensajeCredencialesBot("¡Credenciales borradas!", "text-blue-500 font-bold");
        }

        function mensajeCredencialesBot(message, classes) {
            ELEMENT_RESPUESTA.innerHTML = `<span class="${classes}">${message}</span>`;
            ELEMENT_RESPUESTA.classList.remove('invisible');

            if(timeoutCredencialesBot != null) clearTimeout(timeoutCredencialesBot);

            timeoutCredencialesBot = setTimeout(() => {
                ELEMENT_RESPUESTA.classList.add('invisible');
                timeoutCredencialesBot = null;
            }, 3000);
        }

        // GENERALES

        function pegarCredencialesAqui(element) {

            if(CLIENT_ID == null) return;

            const label = element.closest('label');

            if(label) {
                const element_ID = label.getAttribute('for');
                const tipo = element_ID.split('_')[2];
                document.getElementById(element_ID).value = tipo === 'ID' ? CLIENT_ID : CLIENT_SECRET;
            }
        }

        function tooglePermiso(element) {

            if(element.classList.contains('bg-green-600'))  element.classList.remove('bg-green-600'); // ACTIVO
            else                                            element.classList.add('bg-green-600'); // INACTIVO
        }

        // PERMISOS

        const persmisosTwitch = [
            // Autenticación y usuarios
            'user:read:email',
            'user:read:follows',
            'user:edit',
            'user:edit:follows',
            'user:manage:blocked_users',

            // Streams
            'channel:read:stream_key',
            'channel:read:subscriptions',
            'channel:manage:broadcast',
            'channel:manage:polls',
            'channel:manage:predictions',

            // Chat
            'chat:read',
            'chat:edit',
            'chat:moderate',
            'channel:moderate',
            'moderator:manage:chat_messages',
            'moderator:read:chatters',

            // Bits y monetización
            'bits:read',

            // Clips
            'clips:edit',

            // Follows
            'user:read:blocked_users',
            'user:manage:blocked_users',

            // Moderación
            'moderation:read',
            'moderator:manage:announcements',
            'moderator:manage:automod',
            'moderator:manage:banned_users',
            'moderator:manage:chat_settings',

            // Eventos
            'channel:read:goals',
            'channel:read:redemptions',
            'channel:manage:redemptions',

            // Webhooks/EventSub
            'channel:read:charity',

            // Comerciales
            'channel:edit:commercial',

            // Raids
            'channel:read:hype_train',
            'channel:manage:raids',

            // Videos y VODs
            'user:read:broadcast',
            'user:manage:whispers',
        ];

        // GENERAR TOKEN DE TWITCH

        const ELEMENT_RESPUESTA_WEBHOOK = document.getElementById('webhook_message');
        const BTN_RESPUESTA_WEBHOOK = document.getElementById('webhook_btn');
        const ELEMENT_PERMISOS_WEBHOOK = document.getElementById('webhook_permisos');

        var verPermisosWebhook = false;

        function tooglePermisosWebhook(element) {

            verPermisosWebhook = !verPermisosWebhook;

            if(verPermisosWebhook) {

                ELEMENT_PERMISOS_WEBHOOK.classList.remove('hidden');
                element.classList.remove('lucide-chevron-right-icon', 'lucide-chevron-right');
                element.classList.add('lucide-chevron-down-icon', 'lucide-chevron-down');

                element.firstChild.setAttribute('d', 'm6 9 6 6 6-6');

            } else {

                ELEMENT_PERMISOS_WEBHOOK.classList.add('hidden');

                element.classList.add('lucide-chevron-right-icon', 'lucide-chevron-right');
                element.classList.remove('lucide-chevron-down-icon', 'lucide-chevron-down');

                element.firstChild.setAttribute('d', 'm9 18 6-6-6-6');
            }
        }

        async function generateTwitchToken(event) {

            event.preventDefault();
            
            ELEMENT_RESPUESTA_WEBHOOK.innerHTML = `<div class="text-yellow-600 font-bold flex items-center space-x-2">${LOADING_ICON} <span>Cargando...</span></div>`;
            ELEMENT_RESPUESTA_WEBHOOK.classList.remove('invisible');

            BTN_RESPUESTA_WEBHOOK.disabled = true;

            const formDatos = new FormData(event.target);
            const marcados = ELEMENT_PERMISOS_WEBHOOK.querySelectorAll('.bg-green-600');

            let listPermisos = '';

            marcados.forEach((e, index) => {
                if(index) listPermisos += '+';
                listPermisos += e.textContent;
            });

            const response = await fetch(`${URL_SERVER}/twitch_token/generar_token`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    permisos: listPermisos,
                    CLIENT_ID: formDatos.get('webhook_client_ID'),
                    CLIENT_SECRET: formDatos.get('webhook_client_SECRET'),
                })
            });

            if(!response.ok) ELEMENT_RESPUESTA_WEBHOOK.innerHTML = `<span class="text-red-600 font-bold">¡Parece que ocurrió un error!</span>`;
            else {

                const data = await response.json();

                if(data.error) ELEMENT_RESPUESTA_WEBHOOK.innerHTML = `<span class="text-red-600 font-bold">¡${data.message}!</span>`;
                else {
                    ELEMENT_RESPUESTA_WEBHOOK.innerHTML = `<pre class="bg-white text-sm text-gray-800 p-4 rounded-lg overflow-x-auto border border-gray-300 text-left"><code>${JSON.stringify(data, null, 2)}</code></pre>`;
                }
            }

            BTN_RESPUESTA_WEBHOOK.disabled = false;
        }

        // GENERAR CLIENT_CODE

        const ELEMENT_RESPUESTA_CODE = document.getElementById('code_message');
        const BTN_RESPUESTA_CODE = document.getElementById('code_btn');
        const ELEMENT_PERMISOS_CODE = document.getElementById('code_permisos');

        var verPermisosCode = false;

        function tooglePermisosCode(element) {

            verPermisosCode = !verPermisosCode;

            if(verPermisosCode) {

                ELEMENT_PERMISOS_CODE.classList.remove('hidden');
                element.classList.remove('lucide-chevron-right-icon', 'lucide-chevron-right');
                element.classList.add('lucide-chevron-down-icon', 'lucide-chevron-down');

                element.firstChild.setAttribute('d', 'm6 9 6 6 6-6');

            } else {

                ELEMENT_PERMISOS_CODE.classList.add('hidden');

                element.classList.add('lucide-chevron-right-icon', 'lucide-chevron-right');
                element.classList.remove('lucide-chevron-down-icon', 'lucide-chevron-down');

                element.firstChild.setAttribute('d', 'm9 18 6-6-6-6');
            }
        }

        function createCodeURL(event) {
            event.preventDefault();

            const formDatos = new FormData(event.target);

            const marcados = ELEMENT_PERMISOS_CODE.querySelectorAll('.bg-green-600');

            let listPermisos = '';

            marcados.forEach((e, index) => {
                if(index) listPermisos += '+';
                listPermisos += e.textContent;
            });

            let URL = `https://id.twitch.tv/oauth2/authorize?response_type=code&client_id=${formDatos.get('code_client_ID')}&redirect_uri=${formDatos.get('code_uri_redirect')}`;

            if(listPermisos.length) {
                listPermisos = listPermisos.replaceAll(':', '%3A');
                URL += `&scope=${listPermisos}`;
            }

            ELEMENT_RESPUESTA_CODE.innerHTML = `<div class="w-full"><a class="text-blue-600 underline hover:text-purple-600 break-words" href="${URL}" target="_blank">${URL}</a></div>`;
            ELEMENT_RESPUESTA_CODE.classList.remove('invisible');
        }

        // OBTERNER AUTHORIZATION_CODE

        const ELEMENT_RESPUESTA_IRC = document.getElementById('irc_client_message');
        const BTN_RESPUESTA_IRC = document.getElementById('irc_client_btn');

        async function generateTwitchAuthorization(event) {

            event.preventDefault();

            ELEMENT_RESPUESTA_IRC.innerHTML = `<div class="text-yellow-600 font-bold flex items-center space-x-2">${LOADING_ICON} <span>Cargando...</span></div>`;
            ELEMENT_RESPUESTA_IRC.classList.remove('invisible');

            BTN_RESPUESTA_IRC.disabled = true;

            const formDatos = new FormData(event.target);

            const response = await fetch(`${URL_SERVER}/twitch_token/authorization_code`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    CLIENT_ID: formDatos.get('irc_client_ID'),
                    CLIENT_SECRET: formDatos.get('irc_client_SECRET'),
                    CLIENT_CODE: formDatos.get('irc_client_CODE'),
                    URI_REDIRECT: formDatos.get('irc_client_redirect'),
                })
            });

            if(!response.ok) ELEMENT_RESPUESTA_IRC.innerHTML = `<span class="text-red-600 font-bold">¡Parece que ocurrió un error!</span>`;
            else {

                const data = await response.json();

                if(data.error) ELEMENT_RESPUESTA_IRC.innerHTML = `<span class="text-red-600 font-bold">¡${data.message}!</span>`;
                else {
                    ELEMENT_RESPUESTA_IRC.innerHTML = `<pre class="bg-white text-sm text-gray-800 p-4 rounded-lg overflow-x-auto border border-gray-300 text-left"><code>${JSON.stringify(data, null, 2)}</code></pre>`;
                }
            }

            BTN_RESPUESTA_IRC.disabled = false;
        }

        // CONSULTAR USER_ID

        const ELEMENT_RESPUESTA_USER = document.getElementById('user_message');
        const BTN_RESPUESTA_USER = document.getElementById('user_btn');

        async function getUserID(event) {

            event.preventDefault();
            
            ELEMENT_RESPUESTA_USER.innerHTML = `<div class="text-yellow-600 font-bold flex items-center space-x-2">${LOADING_ICON} <span>Cargando...</span></div>`;
            ELEMENT_RESPUESTA_USER.classList.remove('invisible');

            BTN_RESPUESTA_USER.disabled = true;

            const formDatos = new FormData(event.target);

            const response = await fetch(`${URL_SERVER}/twitch_token/user_id`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    token: formDatos.get('user_twitch_token'),
                    CLIENT_ID: formDatos.get('user_client_ID'),
                    username: formDatos.get('user_username'),
                })
            });

            if(!response.ok) ELEMENT_RESPUESTA_USER.innerHTML = `<span class="text-red-600 font-bold">¡Parece que ocurrió un error!</span>`;
            else {

                const data = await response.json();

                if(data.error) ELEMENT_RESPUESTA_USER.innerHTML = `<span class="text-red-600 font-bold">¡${data.message}!</span>`;
                else {
                    ELEMENT_RESPUESTA_USER.innerHTML = `<pre class="bg-white text-sm text-gray-800 p-4 rounded-lg overflow-x-auto border border-gray-300 text-left"><code>${JSON.stringify(data.data[0], null, 2)}</code></pre>`;
                }
            }

            BTN_RESPUESTA_USER.disabled = false;
        }

        // CONSULTAR SI EL STREAMER ESTÁ EN DIRECTO

        const ELEMENT_RESPUESTA_LIVE = document.getElementById('live_message');
        const BTN_RESPUESTA_LIVE = document.getElementById('live_btn');

        async function getUserIsLive(event) {

            event.preventDefault();
            
            ELEMENT_RESPUESTA_LIVE.innerHTML = `<div class="text-yellow-600 font-bold flex items-center space-x-2">${LOADING_ICON} <span>Cargando...</span></div>`;
            ELEMENT_RESPUESTA_LIVE.classList.remove('invisible');

            BTN_RESPUESTA_LIVE.disabled = true;

            const formDatos = new FormData(event.target);
            const userName = formDatos.get('live_username');

            const response = await fetch(`${URL_SERVER}/twitch_token/is_live`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    token: formDatos.get('live_twitch_token'),
                    CLIENT_ID: formDatos.get('live_client_ID'),
                    username: userName,
                })
            });

            if(!response.ok) ELEMENT_RESPUESTA_LIVE.innerHTML = `<span class="text-red-600 font-bold">¡Parece que ocurrió un error!</span>`;
            else {

                const data = await response.json();

                if(data.error)                  ELEMENT_RESPUESTA_LIVE.innerHTML = `<span class="text-red-600 font-bold">¡${data.message}!</span>`;
                else if(data.data.length == 0)  ELEMENT_RESPUESTA_LIVE.innerHTML = `<span class="text-gray-600 font-bold">${userName}&nbsp;</span> no está en directo 😦`;
                else                            ELEMENT_RESPUESTA_LIVE.innerHTML = `<div><span class="text-yellow-600 font-bold">${userName}</span> está en directo 🥳<br><a class="text-blue-600 underline hover:text-purple-600" target="_blank" href="https://www.twitch.tv/${userName}">https://www.twitch.tv/${userName}</a></div>`;
            }

            BTN_RESPUESTA_LIVE.disabled = false;
        }

        //

        document.addEventListener("DOMContentLoaded", function() {
            CLIENT_ID = localStorage.getItem("CLIENT_ID");
            CLIENT_SECRET = localStorage.getItem("CLIENT_SECRET");

            if(CLIENT_ID && CLIENT_SECRET) {
                ELEMENT_CLIENT_ID.value = CLIENT_ID;
                ELEMENT_CLIENT_SECRET.value = CLIENT_SECRET;
            }

            // PERMISOS

            let finalStr = '';

            persmisosTwitch.forEach(e => {
                finalStr += `<div onclick="tooglePermiso(this)" class="border border-[#ac8bf9] rounded-[3px] p-4 text-center cursor-pointer hover:bg-blue-600 break-words">${e}</div>`;
            });

            ELEMENT_PERMISOS_WEBHOOK.innerHTML = finalStr;
            ELEMENT_PERMISOS_CODE.innerHTML = finalStr;
        });

    </script>
    
</body>
</html>